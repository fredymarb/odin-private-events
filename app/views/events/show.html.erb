<h1><%= @event.title %></h1>
<p>Location: <%= @event.location %></p>
<p>Date: <%= @event.date %></p>
<p>Privacy: <%= @event.is_private ? "This is a private event" : "This isn't a private event" %></p>

<!-- Invite feature only available when event is private -->
<% if @event.is_private? && @event.creator == current_user %>
  <h3>Invite a user</h3>

  <%= form_with url: event_event_invitations_path(@event), method: :post do %>
    <%= select_tag :invitee_id,
      options_from_collection_for_select(User.where.not(id: current_user.id), :id, :email)
    %>
    <%= submit_tag "Invite" %>
  <% end %>
<% end %>

<% attendence = current_user.event_attendences.find_by(attended_event_id: @event) %>
<% if attendence %>
  <%= button_to "Unattend Event", 
      event_event_attendence_path(@event, attendence), 
      method: :delete 
  %>
<% else %>
  <%= button_to "Attend Event", 
      event_event_attendences_path(@event), 
      method: :post 
  %>
<% end %>

<h3>Event Attendees</h3>
<ul>
  <% @event.attendees.each do |attendee| %>
  <li><%= attendee.email %></li>
  <% end %>
</ul>
